alert: JujuMachineAgentsDown
expr: max(sum by (instance) (juju_machine_state{juju_application=~".*",juju_charm=~".*",juju_model=~".*",juju_model_uuid=~".*"} offset 1h)) - max(sum by (instance) (juju_machine_state{juju_application=~".*",juju_charm=~".*",juju_model=~".*",juju_model_uuid=~".*"})) > 0
for: 15m
labels:
  severity: warning
annotations:
  summary: "One or more juju machine agents are down."
  description: "The juju machines count has decreased compared to 1h ago."
